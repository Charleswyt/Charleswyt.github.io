<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <!--Description-->

    

    
        <meta name="description" content="&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;WAVE文件作为多媒体中使用的声波文件格式之一，它是以RIFF格式为标准的。&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;RIFF是英文Resource Interchange File Format的缩写，每个WAVE文件的头四个字节便是“RIFF"/>
    

    <!--Author-->
    
        <meta name="author" content="Charles_wyt"/>
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="wav音频解析"/>
    

    <!--Open Graph Description-->
    
        <meta property="og:description" content="&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;WAVE文件作为多媒体中使用的声波文件格式之一，它是以RIFF格式为标准的。&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;RIFF是英文Resource Interchange File Format的缩写，每个WAVE文件的头四个字节便是“RIFF"/>
    

    <!--Open Graph Site Name-->
        <meta property="og:site_name" content="Home"/>

    <!--Type page-->
    
        <meta property="og:type" content="article"/>
    

    <!--Page Cover-->
    
    
        <meta property="og:image" content="http://yoursite.comhttps://i.imgur.com/klm5KIH.jpg"/>
    

        <meta name="twitter:card" content="summary_large_image"/>

    

    
        <meta name="twitter:image" content="http://yoursite.comhttps://i.imgur.com/klm5KIH.jpg"/>
    

    <!-- Title -->
    
    <title>wav音频解析 - Home</title>

    <!-- Bootstrap Core CSS -->
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"/>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
    <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css"/>
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css"/>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet"/>

    <!-- Google Analytics -->
    


    <!-- favicon -->
    
    <link rel="icon" href="https://i.imgur.com/q06Ip0T.png"/>
    

</head>


<body>

    <!-- Menu -->
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Blog of Charles_wyt</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                
                    <li>
                        <a href="/">
                            
                                Home
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives">
                            
                                Blog
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="https://github.com/charleswyt">
                            
                                <i class="fa fa-github fa-stack-2x"></i>
                            
                        </a>
                    </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

    <!-- Main Content -->
    <!-- Page Header -->
<!-- Set your background image for this header in your post front-matter: cover -->

<header class="intro-header" style="background-image: url('https://i.imgur.com/klm5KIH.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>wav音频解析</h1>
                    
                    <span class="meta">
                        <!-- Date and Author -->
                        
                        
                            2018-09-06
                        
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Tags and categories -->
           
                <div class="col-lg-4 col-lg-offset-2 col-md-5 col-md-offset-1 post-tags">
                    
                        


<a href="/tags/audio/">#audio</a> <a href="/tags/wav/">#wav</a>


                    
                </div>
                <div class="col-lg-4 col-md-5 post-categories">
                    
                </div>
            

            <!-- Gallery -->
            

            <!-- Post Main Content -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <p>&ensp;&ensp;&ensp;&ensp;WAVE文件作为多媒体中使用的声波文件格式之一，它是以RIFF格式为标准的。<br>&ensp;&ensp;&ensp;&ensp;RIFF是英文Resource Interchange File Format的缩写，每个WAVE文件的头四个字节便是“RIFF”。<br>&ensp;&ensp;&ensp;&ensp;WAVE文件是由若干个Chunk组成的。按照在文件中的出现位置包括：RIFF WAVE, Chunk, Format Chunk, Fact Chunk(可选), LIST Chunk(可选), Data Chunk。<br>具体见下图：</p>
<pre><code>------------------------------------------------
|               RIFF WAVE Chunk                |
|               ID  = &apos;RIFF&apos;                   |
|               RiffType = &apos;WAVE&apos;              |
------------------------------------------------
|               Format Chunk                   |
|                ID = &apos;fmt &apos;                   |
------------------------------------------------
|            Fact Chunk(optional)              |
|                 ID = &apos;fact&apos;                  |
------------------------------------------------
|             LIST Chunk(optional)             |
|                 ID = &apos;LIST&apos;                  |
------------------------------------------------
|                 Data Chunk                   |
|                 ID = &apos;data&apos;                  |
------------------------------------------------
</code></pre><p>&ensp;&ensp;&ensp;&ensp;其中除了Fact Chunk和LIST Chunk外，其他三个Chunk是必须的。每个Chunk有各自的ID，位于Chunk最开始位置，作为标示，而且均为4个字节。并且紧跟在ID后面的是Chunk大小(去除ID和Size所占的字节数后剩下的其他字节数目)，4个字节表示，低字节表示数值低位，高字节表示数值高位。下面具体介绍各个Chunk内容。</p>
<h1 id="1-RIFF-WAVE-Chunk"><a href="#1-RIFF-WAVE-Chunk" class="headerlink" title="1.RIFF WAVE Chunk"></a>1.RIFF WAVE Chunk</h1><pre><code>|       |  Length  |   Content   |
==================================
| ID    |  4 Bytes |   &apos;RIFF&apos;    |
----------------------------------
| Size  |  4 Bytes |             |
----------------------------------
| Type  |  4 Bytes |   &apos;WAVE&apos;    |
----------------------------------
</code></pre><p>&ensp;&ensp;&ensp;&ensp;以’FIFF’作为标示，然后紧跟着为size字段，该size是整个wav文件大小减去ID和Size所占用的字节数，即FileLen - 8 = Size。然后是Type字段，为’WAVE’，表示是wav文件。结构定义如下：</p>
<pre><code>struct RIFF_HEADER
{
    char  szRiffID[4];        // &apos;R&apos;,&apos;I&apos;,&apos;F&apos;,&apos;F&apos;
    DWORD dwRiffSize;
    char  szRiffFormat[4];    // &apos;W&apos;,&apos;A&apos;,&apos;V&apos;,&apos;E&apos;
};
</code></pre><p>2.Format Chunk</p>
<pre><code>====================================================================
|               |   Length  |              Content                 |
====================================================================
| ID            |  4 Bytes  |   &apos;fmt &apos;                             |
--------------------------------------------------------------------
| Size          |  4 Bytes  | 16 or 18, if 18, there is padding    |
--------------------------------------------------------------------
| FormatTag     |  2 Bytes  | method of coding, 0x0001 in general  |
--------------------------------------------------------------------
| Channels      |  2 Bytes  | number of channels, 1 or 2           | 
--------------------------------------------------------------------
| SamplesPerSec |  4 Bytes  | sampling rate                        |
--------------------------------------------------------------------
| AvgBytesPerSec|  4 Bytes  | bytes per second                     |
--------------------------------------------------------------------
| BlockAlign    |  2 Bytes  | 数据块对齐单位(每个采样需要的字节数)    |
--------------------------------------------------------------------
| BitsPerSample |  2 Bytes  | bit depth                            |
--------------------------------------------------------------------
|               |  2 Bytes  | padding (optional)                   | 
--------------------------------------------------------------------
</code></pre><p>&ensp;&ensp;&ensp;&ensp;以’fmt ‘作为标示。一般情况下Size为16，此时最后附加信息没有；如果为18则最后多了2个字节的附加信息。主要由一些软件制成的wav格式中含有该2个字节的附加信息。结构定义如下：</p>
<pre><code>struct WAVE_FORMAT
{
    WORD wFormatTag;
    WORD wChannels;
    DWORD dwSamplesPerSec;
    DWORD dwAvgBytesPerSec;
    WORD wBlockAlign;
    WORD wBitsPerSample;
};

struct FMT_BLOCK
{
    char  szFmtID[4]; // &apos;f&apos;,&apos;m&apos;,&apos;t&apos;,&apos; &apos;
    DWORD  dwFmtSize;
    WAVE_FORMAT wavFormat;
};
</code></pre><p>3.Fact Chunk</p>
<pre><code>==================================
|       |  Length  |  Content    |
==================================
| ID    |  4 Bytes |   &apos;fact&apos;    |
----------------------------------
| Size  |  4 Bytes |   数值为4    |
----------------------------------
| data  |  4 Bytes |             |
----------------------------------
</code></pre><p>&ensp;&ensp;&ensp;&ensp;Fact Chunk是可选字段，一般当wav文件由某些软件转化而成，则包含该Chunk。结构定义如下：</p>
<pre><code>struct FACT_BLOCK
{
    char  szFactID[4]; // &apos;f&apos;,&apos;a&apos;,&apos;c&apos;,&apos;t&apos;
    DWORD  dwFactSize;
};
</code></pre><p>4.LIST Chunk</p>
<pre><code>==================================
|       |  Length  |  Content    |
==================================
| ID    |  4 Bytes |   &apos;LIST&apos;    |
----------------------------------
| Size  |  4 Bytes |             |
----------------------------------
| Type  |  4 Bytes |   &apos;INFO&apos;    |
----------------------------------
|         Sub LIST Chunk         |
----------------------------------
</code></pre><p>Sub LIST Chunk</p>
<pre><code>==================================
|       |  Length  |  Content    |
==================================
| ID    |  4 Bytes |   &apos;ISFT&apos;    |
----------------------------------
| Size  |  4 Bytes |             |
----------------------------------
| Data  | 14 Bytes |             |
----------------------------------
</code></pre><p>结构定义如下：</p>
<pre><code>struct LIST_SUBCHUNK
{
    char  ChunkID[4];        // &apos;I&apos; &apos;S&apos; &apos;F&apos; &apos;T&apos;
    DWORD dwSubChunkSize;
    char  ListData[14];
};

struct LIST_BLOCK
{
    char  szLishID[4];        // &apos;L&apos; &apos;I&apos; &apos;S&apos; &apos;T&apos;
    DWORD dwListSize;        // List Chunk的大小
    char  ChunkType[4];        // &apos;I&apos; &apos;N&apos; &apos;F&apos; &apos;O&apos;
    LIST_SUBCHUNK subChunk;    // 上面定义的结构体，大小为22字节
};
</code></pre><p>5.Data Chunk</p>
<pre><code>==================================
|       |  Legnth  |   Content   |
==================================
| ID    |  4 Bytes |   &apos;data&apos;    |
----------------------------------
| Size  |  4 Bytes |             |
----------------------------------
| data  |          |             |
----------------------------------
</code></pre><p>&ensp;&ensp;&ensp;&ensp;Data Chunk是真正保存wav数据的地方，以’data’作为该Chunk的标示。然后是数据的大小。紧接着就是wav数据。根据Format Chunk中的声道数以及采样bit数，wav数据的bit位置可以分成以下几种形式：</p>
<pre><code>----------------------------------------------------------------------------------------
|  mono   |    sampling 1    |    sampling 2    |    sampling 3    |    sampling 4     |
|         |-----------------------------------------------------------------------------
|  8bit   |    channel 0     |    channel 0     |    channel 0     |    channel 0      |
----------------------------------------------------------------------------------------
| stereo  |          sampling 1                 |           samping 2                  |
|         |-----------------------------------------------------------------------------
|  8bit   | channel 0(left)  | channel 1(right) | channel 0 (left) |  channel 1(right) |
----------------------------------------------------------------------------------------
|         |          sampling 1                 |           sampling 2                 |
|  mono   |-----------------------------------------------------------------------------
|  16bit  |    channel 0     |    channel 0     |    channel 0     |    channel 0      |
|         |     (low)        |      (high)      |     (low)        |      (high)       |
----------------------------------------------------------------------------------------
|         |                        sampling 1                                          |
| stereo  |-----------------------------------------------------------------------------
|  16bit  | channel 0(left)  | channel 1(right) | channel 0 (left) |  channel 1(right) |
|         |     (low)        |      (high)      |     (low)        |      (high)       |
----------------------------------------------------------------------------------------
</code></pre><p>结构定义如下：</p>
<pre><code>struct DATA_BLOCK
{
    char szDataID[4]; // &apos;d&apos;,&apos;a&apos;,&apos;t&apos;,&apos;a&apos;
    DWORD dwDataSize;
};
</code></pre>

                
            </div>

            <!-- Comments -->
            
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    


                </div>
            
        </div>
    </div>
</article>

    <!-- Footer -->
    <hr />

<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    

                    

                    

                    

                    
                        <li>
                            <a href="mailto:charles_wyt@126.com" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-envelope-o fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    

                    
                </ul>
                <p class="copyright text-muted">&copy; 2018 Charles_wyt<br></p>
                <!-- <p class="copyright text-muted">Original Theme <a target="_blank" href="http://startbootstrap.com/template-overviews/clean-blog/">Clean Blog</a> from <a href="http://startbootstrap.com/" target="_blank">Start Bootstrap</a></p> -->
                <!-- <p class="copyright text-muted">Adapted for <a target="_blank" href="https://hexo.io/">Hexo</a> by <a href="http://www.codeblocq.com/" target="_blank">Jonathan Klughertz</a></p> -->
            </div>
        </div>
    </div>
</footer>


    <!-- After footer scripts -->
    
<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Bootstrap -->
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Disqus Comments -->



</body>

</html>